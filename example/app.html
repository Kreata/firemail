<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <title>Firemail</title>
        <!-- data-main attribute tells require.js to load
             scripts/main.js after require.js loads. -->
        <script data-main="app" src="require.js"></script>
        <script>
            // load SMTP data from localStorage (if set)
            document.addEventListener("DOMContentLoaded", function(evt){
                try{
                    var mail = JSON.parse(localStorage.firemailDemo);
                    if(mail.smtp){
                        document.getElementById("host").value = mail.smtp.host || "localhost";
                        document.getElementById("port").value = mail.smtp.port || "";
                        document.getElementById("ssl").checked = !!mail.smtp.useSSL;
                        if(mail.smtp.auth){
                            document.getElementById("user").value = mail.smtp.auth.user || "";
                            document.getElementById("pass").value = mail.smtp.auth.pass || "";
                        }
                    }

                    document.getElementById("from").value = mail.from || "";

                }catch(E){}
            }, false);
        </script>
    </head>
    <body>
        <h1>Firemail</h1>
        <p><a href="../test/testrunner.html">UNIT TESTS</a></p>

        <h2>Send an e-mail</h2>

        <form method="post" action="." onsubmit="sendMail(); return false;">

            <fieldset>
                <legend>SMTP settings</legend>
                <small><strong>NB!</strong> SMTP settings are stored to localStorage</small>
                <table style="width: 95%">

                    <tr>
                        <td>
                            <label for="host">Hostname</label>
                        </td>
                        <td>
                            <input type="text" id="host" value="smtp.gmail.com" />
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <label for="port">Port</label>
                        </td>
                        <td>
                            <input type="number" id="port" value="465" />
                        </td>
                    </tr>

                    <tr>
                        <td colspan="2">
                            <input type="checkbox" id="ssl" checked/> use SSL</label>
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <label for="user">User name</label>
                        </td>
                        <td>
                            <input type="text" id="user" value="" />
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <label for="pass">Password</label>
                        </td>
                        <td>
                            <input type="password" id="pass" value="" />
                        </td>
                    </tr>

                </table>
            </fieldset>

            <fieldset>
                <legend>Compose e-mail</legend>

                <table style="width: 95%">

                    <tr>
                        <td>
                            <label for="from">From:</label>
                        </td>
                        <td>
                            <input type="text" id="from" value="" />
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <label for="to">To:</label>
                        </td>
                        <td>
                            <input type="text" id="to" value="" />
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <label for="subject">Subject:</label>
                        </td>
                        <td>
                            <input type="text" id="subject" value="" />
                        </td>
                    </tr>

                    <tr>
                        <td colspan="2">
                            <label>Text<br />
                    <textarea id="text" style="width: 90%;" rows=5>

-- best regards
</textarea></label>
                        </td>
                    </tr>

                    <tr>
                        <td colspan="2">
                            <label>Attachment<br/><input type="file" id="attachment"/></label>
                        </td>
                    </tr>

                    <tr>
                        <td colspan="2">
                            <input type="submit" id="sendBtn" value="Send mail" />
                        </td>
                    </tr>

                </table>

            </fieldset>
        </form>
    </body>
</html>





